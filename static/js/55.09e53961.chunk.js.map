{"version":3,"file":"static/js/55.09e53961.chunk.js","mappings":"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","sources":["webpack://react-kabzda-1/./src/components/Profile/MyPosts/MyPosts.module.css?831b","webpack://react-kabzda-1/./src/components/Profile/MyPosts/Post/Post.module.css?87e6","components/Profile/MyPosts/Post/Post.jsx","components/Profile/MyPosts/MyPosts.jsx","components/Profile/MyPosts/MyPostsContainer.jsx","webpack://react-kabzda-1/./src/components/Profile/ProfileInfo/ProfileInfo.module.css?ead2","components/Profile/ProfileInfo/ProfileStatus.jsx","components/Profile/ProfileInfo/ProfileStatusWithHooks.jsx","components/Profile/ProfileInfo/ProfileInfo.jsx","components/Profile/Profile.jsx","components/Profile/ProfileContainer.jsx","hoc/WithAuthRedirect.js"],"sourcesContent":["// extracted by mini-css-extract-plugin\nexport default {\"postsBlock\":\"MyPosts_postsBlock__lB-pf\"};","// extracted by mini-css-extract-plugin\nexport default {\"item\":\"Post_item__Yu4oG\"};","import s from './Post.module.css';\n\nconst Post = (props) => {\n    return (\n        <div className={s.item}>\n            <img src=\"https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT2wareh2sTFt9oXaOyjVfHUHVaYyl7JRwhyw&s\" alt=\"\" />\n            {props.message}\n            <div>\n                <span>{props.like}</span>\n            </div>\n        </div>\n    );\n}\n\nexport default Post;","import React, { PureComponent, useRef } from 'react';\nimport s from './MyPosts.module.css';\nimport Post from './Post/Post';\nimport { useForm } from 'react-hook-form';\nimport { Textarea } from '../../Common/FormsControls/FormsControls';\n// import {addPostActionCreator, updateNewPostTextActionCreator} from '../../../redux/profile-reducer';\n\n\n\n// class MyPosts extends PureComponent {\nconst MyPosts = React.memo((props) => {\n\n    // shouldComponentUpdate(nextProps, nextState) {\n    //     return nextProps != props || nextState != this.state;\n    // }\n        let postsElements = [...props.posts]\n        .reverse()\n        .map( p => <Post message={p.post} like={p.likesCount} key={p.id}/> );\n\n    let newwPostElement = React.createRef();\n\n    let onAddPost = () => {\n        props.addPost();\n        // props.dispatch(addPostActionCreator());\n    }\n\n    let onPostChange = () => {\n        let text = newwPostElement.current.value;\n        props.updateNewPostText(text);\n        // props.dispatch(updateNewPostTextActionCreator(text));\n    }\n\n    return (\n            <div className={s.postsBlock}>\n                <h3>My posts</h3>\n                <div>\n                <AddPostForm addPost={props.addPost}/>\n                    \n                </div>\n                <div className={s.posts}>\n                    { postsElements }\n                </div>\n            </div>\n    );\n\n    \n});\n\nconst AddPostForm = (props) => {\n\n    const {register, handleSubmit, formState: {errors}} = useForm({});\n\n    const onSubmit = (data) => props.addPost(data.postText);\n\n    return <form onSubmit={handleSubmit(onSubmit)}>\n        <div>\n            {/* <textarea {...register(\"postText\")}/> */}\n            <Textarea {...register(\"postText\", {required: true})} errors={errors.postText}/>\n        </div>\n        <div>\n            <button>Add post</button>\n        </div>\n    </form>\n}\n\nexport default MyPosts;","import React from 'react';\nimport {addPostActionCreator, updateNewPostTextActionCreator} from '../../../redux/profile-reducer';\nimport MyPosts from './MyPosts';\nimport { connect } from 'react-redux';\nimport { compose } from 'redux';\n// import StoreContext from '../../../StoreContext';\n\n\n\n// const MyPostsContainer = () => {\n\n//     return (\n//         <StoreContext.Consumer>\n//             { (store) => {\n//                     let state = store.getState();\n\n//                     let addPost = () => {\n//                         store.dispatch(addPostActionCreator());\n//                     }\n                \n//                     let onPostChange = (text) => {\n//                         store.dispatch(updateNewPostTextActionCreator(text));\n//                     }\n\n//                     return (\n//                         <MyPosts updateNewPostText ={onPostChange} \n//                         addPost={addPost} \n//                         posts={state.profilePage.posts} \n//                         newPostText={state.profilePage.newPostText}/>\n//                     )\n                    \n//                 }\n//             }         \n//         </StoreContext.Consumer>\n//     );\n// }\n\nlet mapStateToProps = (state) => {\n    return {\n        posts: state.profilePage.posts,\n        newPostText: state.profilePage.newPostText,\n    }\n}\nlet mapDispatchToProps = (dispatch) => {\n    return {\n        addPost: (postText) => { dispatch(addPostActionCreator(postText)) },\n        updateNewPostText: (text) => { dispatch(updateNewPostTextActionCreator(text)) },\n    }\n}\n\n// const MyPostsContainer = connect(mapStateToProps, mapDispatchToProps)(MyPosts);\nconst MyPostsContainer = compose(\n    connect(mapStateToProps, mapDispatchToProps),\n)(MyPosts);\n\nexport default MyPostsContainer;","// extracted by mini-css-extract-plugin\nexport default {\"descriptionBlock\":\"ProfileInfo_descriptionBlock__XBXuJ\",\"coverImage\":\"ProfileInfo_coverImage__Y20fc\"};","import React from 'react';\nimport Preloader from '../../Common/Preloader/Preloader';\nimport s from './ProfileInfo.module.css'\nimport { profileAPI } from '../../../api/api';\n\nclass ProfileStatus extends React.Component {\n\n    state = {\n        editMode: false,\n        status: this.props.status,\n    }\n\n    activateEditMode = () => {\n        this.setState({\n            editMode: true,\n        });\n    }\n    deactivateEditMode = () => {\n        this.setState({\n            editMode: false,\n        });\n        this.props.updateStatus(this.state.status);\n    }\n\n    onStatusChange = (e) => {\n        this.setState({\n            status: e.currentTarget.value,\n        });\n    }\n\n    componentDidUpdate(prevProps, prevState) {\n        // this.state;\n        // this.props;\n        if (prevProps.status !== this.props.status) {\n            this.setState({\n                status: this.props.status\n            });\n        }\n        \n    }\n    render() {\n        return (\n            <div>\n                {!this.state.editMode &&\n                    <div>\n                        <span onDoubleClick={this.activateEditMode}>{this.props.status || \"------\"}</span>\n                    </div>\n                }\n                {this.state.editMode &&\n                    <div>\n                        <input onChange={this.onStatusChange} autoFocus=\"true\" onBlur={this.deactivateEditMode} type=\"text\" value={this.state.status} />\n                    </div>\n                }\n            </div>\n        );\n    }\n    \n}\n\nexport default ProfileStatus;","import React, { useEffect, useState } from 'react';\nimport Preloader from '../../Common/Preloader/Preloader';\nimport s from './ProfileInfo.module.css'\nimport { profileAPI } from '../../../api/api';\n\nconst ProfileStatusWithHooks = (props) =>  {\n\n    // let stateWithSetState = useState(false);\n    // let editMode = stateWithSetState[0];\n    // let setEditMode = stateWithSetState[1];\n    let [editMode, setEditMode] = useState(false);\n\n    let [status, setStatus] = useState(props.status);\n\n    useEffect( () => {\n        setStatus(props.status);\n    }, [props.status]);\n\n    const activateMode = () => {\n        setEditMode(true);\n    }\n    const deactivateEditMode = () => {\n        setEditMode(false);\n        props.updateStatus(status);\n    }\n    const onStatusChange = (e) => {\n        setStatus(e.currentTarget.value);\n    }\n\n        return (\n            <div>\n                {! editMode &&\n                    <div>\n                        <span onDoubleClick={activateMode}>{props.status || \"------\"}</span>\n                    </div>\n                }\n                {editMode &&\n                    <div>\n                        <input onChange={onStatusChange} autoFocus=\"true\" type=\"text\" onBlur={deactivateEditMode} value={status} />\n                    </div>\n                }\n            </div>\n        );\n    \n}\n\nexport default ProfileStatusWithHooks;","import Preloader from '../../Common/Preloader/Preloader';\nimport s from './ProfileInfo.module.css'\nimport ProfileStatus from './ProfileStatus';\nimport ProfileStatusWithHooks from './ProfileStatusWithHooks';\n\nconst ProfileInfo = ({profile, status, updateStatus}) => {\n    if(!profile) {\n        return <Preloader />\n    }\n\n    return (\n        <div>\n            <div className={s.coverImage}>\n                {/* <img src='https://www.bigfootdigital.co.uk/wp-content/uploads/2020/07/image-optimisation-scaled.jpg' /> */}\n            </div>\n            <div className={s.descriptionBlock}>\n                {profile.aboutMe}\n                <img src={profile.photos.small} />\n                <ProfileStatusWithHooks status={status} updateStatus={updateStatus} />\n            </div>\n        </div>\n    );\n}\n\nexport default ProfileInfo;","import MyPosts from './MyPosts/MyPosts';\nimport MyPostsContainer from './MyPosts/MyPostsContainer';\nimport s from './Profile.module.css';\nimport ProfileInfo from './ProfileInfo/ProfileInfo';\n\nconst Profile = (props) => {\n    return (\n        <main>\n            <ProfileInfo profile={props.profile} status={props.status} updateStatus={props.updateStatus}/>\n            <MyPostsContainer />\n        </main>\n    );\n}\n\nexport default Profile;","import axios from 'axios';\nimport Profile from './Profile';\nimport { getUser, getUserStatus, setUserProfile, updateUserStatus } from '../../redux/profile-reducer';\nimport { connect } from 'react-redux';\nimport React from 'react';\nimport { Navigate, useParams } from 'react-router-dom';\nimport { profileAPI } from '../../api/api';\nimport { WithAuthRedirect } from '../../hoc/WithAuthRedirect';\nimport { compose } from 'redux';\n\nclass ProfileContainer extends React.Component {\n    componentDidMount () {\n        let userId = this.props.match.params.userId;\n        if(!userId) {\n            \n            userId = this.props.authorizedUserId;\n                    \n            if(!userId){\n                this.props.history.push(\"/login\");\n            }\n            \n        }\n        // profileAPI.getUserProfile(userId)\n        //     .then(data => {\n        //         this.props.setUserProfile(data);\n        //     });\n        this.props.getUser(userId);\n        this.props.getUserStatus(userId);\n    }\n    render () {\n        return <Profile {...this.props} profile={this.props.profile} status={this.props.status} updateStatus={this.props.updateUserStatus}/>\n    }\n}\n\n\n\n// let AuthRedirectComponent = WithAuthRedirect(ProfileContainer);\n\n\n\nlet mapStateToProps = (state) => ({\n    profile: state.profilePage.user,\n    status: state.profilePage.status,\n    authorizedUserId: state.auth.userId,\n    isAuth: state.auth.isAuth, \n});\n\nfunction withRouter(Children){\n    return(props)=>{\n\n       const match  = {params: useParams()};\n       return <Children {...props}  match = {match}/>\n   }\n }\n\n// let WithUlrDataConainerComponent = withRouter(AuthRedirectComponent);\n// export default connect(mapStateToProps, {setUserProfile, getUser})(WithUlrDataConainerComponent);\n\nexport default compose(\n    connect(mapStateToProps, {setUserProfile, getUser, getUserStatus, updateUserStatus}),\n    withRouter,\n    WithAuthRedirect,\n)(ProfileContainer);","import { connect } from \"react-redux\";\nimport { Navigate } from \"react-router-dom\";\n\nlet mapStateToPropsRedirect = (state) => ({\n    isAuth: state.auth.isAuth,\n});\n\nexport const WithAuthRedirect = (Component) => {\n    let RedirectComponent = (props) => {\n        if(!props.isAuth) {\n            return <Navigate to={\"/login\"} />\n        }\n        return <Component {...props} />\n    }\n    \n    let ConnectedRedirectComponent = connect(mapStateToPropsRedirect)(RedirectComponent);\n\n    return ConnectedRedirectComponent;\n}"],"names":["props","_jsxs","className","s","children","_jsx","src","alt","message","like","MyPosts","React","postsElements","posts","reverse","map","p","Post","post","likesCount","id","postsBlock","AddPostForm","addPost","register","handleSubmit","formState","errors","useForm","onSubmit","data","postText","Textarea","_objectSpread","required","compose","connect","state","profilePage","newPostText","dispatch","addPostActionCreator","updateNewPostText","text","updateNewPostTextActionCreator","editMode","setEditMode","useState","status","setStatus","useEffect","onDoubleClick","activateMode","onChange","e","currentTarget","value","autoFocus","type","onBlur","deactivateEditMode","updateStatus","_ref","profile","aboutMe","photos","small","ProfileStatusWithHooks","Preloader","ProfileInfo","MyPostsContainer","ProfileContainer","componentDidMount","userId","this","match","params","authorizedUserId","history","push","getUser","getUserStatus","render","Profile","updateUserStatus","user","auth","isAuth","setUserProfile","Children","useParams","WithAuthRedirect","mapStateToPropsRedirect","Component","Navigate","to"],"sourceRoot":""}