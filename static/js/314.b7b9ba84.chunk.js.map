{"version":3,"file":"static/js/314.b7b9ba84.chunk.js","mappings":"oKAGA,IAAIA,EAA2BC,IAAK,CAChCC,OAAQD,EAAME,KAAKD,SAGhB,MAAME,EAAoBC,IAQIC,EAAAA,EAAAA,IAAQN,EAARM,EAPRC,GACjBA,EAAML,QAGHM,EAAAA,EAAAA,KAACH,GAASI,EAAAA,EAAAA,GAAA,GAAKF,KAFXC,EAAAA,EAAAA,KAACE,EAAAA,GAAQ,CAACC,GAAI,Y,0ECTjC,QAA0B,yBAA1B,EAAkE,8BAAlE,EAAyG,wBAAzG,EAA4K,yBAA5K,EAAgN,0BAAhN,EAAoP,yBAApP,EAAoR,sB,aCCpR,MAUA,EAViBJ,IAETC,EAAAA,EAAAA,KAAA,OAAKI,UAAS,GAAAC,OAAKC,EAAS,KAAAD,OAAoB,GAAhBN,EAAMQ,OAAc,OAAS,SAAUC,UACnER,EAAAA,EAAAA,KAAA,OAAKI,UAAWE,EAAOE,SAClBT,EAAMU,Y,YCHvB,MAaA,EAboBV,IAChB,IAAIW,EAAO,YAAcX,EAAMY,GAE/B,OACIX,EAAAA,EAAAA,KAAA,OAAKI,UAAWE,EAASE,UACrBI,EAAAA,EAAAA,MAACC,EAAAA,GAAO,CAACV,GAAIO,EAAMN,UAAWE,EAAUE,SAAA,EACpCR,EAAAA,EAAAA,KAAA,OAAKc,IAAKf,EAAMgB,OAAQC,IAAI,iBAC3BjB,EAAMkB,SAET,E,qBCHmBC,ECuCK,IDvCLA,MCyCjC,MAAMC,EAAkBpB,IAIpB,MAAM,SAAEqB,EAAQ,aAAEC,EAAcC,WAAW,OAACC,KAAYC,EAAAA,EAAAA,IAAQ,CAChE,GAEA,OAAOZ,EAAAA,EAAAA,MAAA,QAAMa,SAAUJ,GADLK,GAAS3B,EAAM4B,WAAWD,EAAKjB,WACHD,SAAA,EAE1CR,EAAAA,EAAAA,KAAC4B,EAAAA,GAAQ3B,EAAAA,EAAAA,IAAAA,EAAAA,EAAAA,GAAA,GAAKmB,EAAS,UAAW,CAAES,UAAU,EAAMX,UAAW,MAAK,IAAEY,YAAY,qBAAqBP,OAAQA,EAAOd,YACtHT,EAAAA,EAAAA,KAAA,UAAAQ,SAAQ,mBACL,EAGX,EAtDiBT,IAEb,IAAIgC,EAAkBhC,EAAMiC,YAAYC,QACnCC,KAAKC,IAAKnC,EAAAA,EAAAA,KAACoC,EAAU,CAACnB,KAAMkB,EAAElB,KAAiBN,GAAIwB,EAAExB,GAAII,OAAQoB,EAAEpB,QAA1BoB,EAAExB,MAC5C0B,EAAmBtC,EAAMiC,YAAYM,SACpCJ,KAAKK,IAAKvC,EAAAA,EAAAA,KAACwC,EAAO,CAAC/B,QAAS8B,EAAE9B,QAASF,OAAQgC,EAAEhC,QAAagC,EAAE5B,MAgBrE,OAAIZ,EAAML,QAKNkB,EAAAA,EAAAA,MAAA,OAAKR,UAAWE,EAAUE,SAAA,EACtBR,EAAAA,EAAAA,KAAA,OAAKI,UAAWE,EAAeE,SACzBuB,KAENnB,EAAAA,EAAAA,MAAA,OAAKR,UAAWE,EAAWE,SAAA,EACvBR,EAAAA,EAAAA,KAAA,OAAAQ,SAAO6B,KACPrC,EAAAA,EAAAA,KAACmB,EAAc,CAACQ,WAAY5B,EAAM4B,oBAVnC3B,EAAAA,EAAAA,KAACE,EAAAA,GAAQ,CAACC,GAAI,UAYf,E,8BCKcP,EAAAA,EAAAA,GAAiB6C,GAK7C,SAAeC,EAAAA,EAAAA,KACX5C,EAAAA,EAAAA,KArBmBL,IACZ,CACHuC,YAAavC,EAAMuC,gBAIDW,IACf,CACHhB,WAAalB,IAAakC,GAASC,EAAAA,EAAAA,IAAkBnC,GAAS,EAC9DoC,qBAAuBC,IAAUH,GAASI,EAAAA,EAAAA,IAA4BD,GAAM,MAahFlD,EAAAA,EAFJ,CAGE6C,E","sources":["hoc/WithAuthRedirect.js","webpack://react-kabzda-1/./src/components/Dialogs/Dialogs.module.css?1b2e","components/Dialogs/Message/Message.jsx","components/Dialogs/DialogItem/DialogItem.jsx","utils/validators/validators.js","components/Dialogs/Dialogs.jsx","components/Dialogs/DialigsContainer.jsx"],"sourcesContent":["import { connect } from \"react-redux\";\nimport { Navigate } from \"react-router-dom\";\n\nlet mapStateToPropsRedirect = (state) => ({\n    isAuth: state.auth.isAuth,\n});\n\nexport const WithAuthRedirect = (Component) => {\n    let RedirectComponent = (props) => {\n        if(!props.isAuth) {\n            return <Navigate to={\"/login\"} />\n        }\n        return <Component {...props} />\n    }\n    \n    let ConnectedRedirectComponent = connect(mapStateToPropsRedirect)(RedirectComponent);\n\n    return ConnectedRedirectComponent;\n}","// extracted by mini-css-extract-plugin\nexport default {\"dialogs\":\"Dialogs_dialogs__oe96H\",\"dialogsItems\":\"Dialogs_dialogsItems__zeEWD\",\"dialog\":\"Dialogs_dialog__htSTl\",\"active\":\"Dialogs_active__t8cjl\",\"navLink\":\"Dialogs_navLink__tOsxQ\",\"messages\":\"Dialogs_messages__Cg2l+\",\"message\":\"Dialogs_message__ZEWo0\",\"body\":\"Dialogs_body__6RDuF\"};","import s from './../Dialogs.module.css';\n\nconst Message = (props) => {\n    return (\n        <div className={`${s.message} ${props.userId == 1 ? 'left' : 'right'}`}>\n            <div className={s.body}>\n                {props.message}\n            </div>\n        </div>\n    );\n}\n\nexport default Message;","import { NavLink } from 'react-router-dom';\nimport s from './../Dialogs.module.css';\n\nconst DialogItem = (props) => {\n    let path = '/dialogs/' + props.id;\n\n    return (\n        <div className={s.dialog}>\n            <NavLink to={path} className={s.navLink}>\n                <img src={props.avatar} alt=\"{props.name}\" />\n                {props.name}\n            </NavLink>\n        </div>\n    );\n}\n\nexport default DialogItem;","export const requiredField = value => {\n\n    if (value)  return undefined;\n    \n    return 'Field is required';\n    \n}\n\n\nexport const maxLengthCreator = (maxLength) => (value) => {\n    if (value && value.length > maxLength) return 'Max lenght is 30 symbols';\n}","import React from 'react';\nimport s from './Dialogs.module.css';\nimport Message from './Message/Message';\nimport DialogItem from './DialogItem/DialogItem';\nimport { Navigate } from 'react-router-dom';\nimport { useForm } from 'react-hook-form';\nimport { Textarea } from '../Common/FormsControls/FormsControls';\nimport { maxLengthCreator } from '../../utils/validators/validators';\n\n\nconst Dialogs = (props) => {\n\n    let dialogsElements = props.dialogsPage.dialogs\n        .map( d => <DialogItem name={d.name} key={d.id} id={d.id} avatar={d.avatar} /> );\n    let messagesElements = props.dialogsPage.messages\n        .map( m => <Message message={m.message} userId={m.userId} key={m.id} />);\n\n    // let newMessage = React.createRef();\n\n    // let addMessage = () => {\n    //     // props.dispatch(addMessageCreator());\n    //     props.addMessage();\n    // }\n    // let changeMesageText = (e) => {\n    //     let newText = e.target.value;\n    //     props.updateNewMessageBody(newText);\n    //     // props.dispatch(updateNewMessageTextCreator(newText));\n    // }\n\n    \n\n    if(!props.isAuth) {\n        return <Navigate to={\"/login\"} />\n    }\n\n    return (\n        <div className={s.dialogs}>\n            <div className={s.dialogsItems}>\n                { dialogsElements }\n            </div>\n            <div className={s.messages}>\n                <div>{ messagesElements }</div>\n                <AddMessageForm addMessage={props.addMessage} />\n            </div>\n        </div>\n    );\n}\n\nconst maxLength100 = maxLengthCreator(100);\n\nconst AddMessageForm = (props) => {\n    // let addNewMessage = (values) => {\n    //     props.addMessage(values.message);\n    // }\n    const { register, handleSubmit, formState: {errors} } = useForm({\n    });\n    const onSubmit = (data) => props.addMessage(data.message);\n    return <form onSubmit={handleSubmit(onSubmit)}>\n        {/* <textarea {...register(\"message\", { required: true, maxLength: 20 })} placeholder='Enter your message'></textarea> */}\n        <Textarea {...register(\"message\", { required: true, maxLength: 20 })} placeholder='Enter your message' errors={errors.message}/>\n        <button>Send message</button>\n    </form>\n}\n\nexport default Dialogs;","import React from 'react';\nimport { addMessageCreator, updateNewMessageTextCreator } from '../../redux/dialogs-reducer';\nimport Dialogs from './Dialogs';\nimport { connect } from 'react-redux';\nimport { Navigate } from 'react-router-dom';\nimport { WithAuthRedirect } from '../../hoc/WithAuthRedirect';\nimport { compose } from 'redux';\n// import StoreContext from '../../StoreContext';\n\n\n// const DialogsContainer = () => {\n//     return (\n//         <StoreContext.Consumer> \n//             { (store) => {\n//                 let state = store.getState().dialogsPage;\n\n//                 let addMessage = () => {\n//                     store.dispatch(addMessageCreator());\n//                 }\n//                 let changeMesageText = (body) => {\n//                     store.dispatch(updateNewMessageTextCreator(body));\n//                 }\n//                 return (\n//                     <Dialogs addMessage={addMessage} updateNewMessageBody={changeMesageText} dialogsPage={state}/>\n//                 )\n//             }    \n//         }\n//         </StoreContext.Consumer>\n        \n//     );\n// }\n\n\n\nlet mapStateToProps = (state) => {\n    return {\n        dialogsPage: state.dialogsPage,\n    }\n}\n\nlet mapDispatchToProps = (dispatch) => {\n    return {\n        addMessage: (message) => {dispatch(addMessageCreator(message));},\n        updateNewMessageBody: (body) => {dispatch(updateNewMessageTextCreator(body))},\n    }\n}\n\n\n\nlet AuthRedirectComponent = WithAuthRedirect(Dialogs);\n\n// const DialogsContainer = connect(mapStateToProps, mapDispatchToProps)(AuthRedirectComponent);\n\n// export default DialogsContainer;\nexport default compose(\n    connect(mapStateToProps, mapDispatchToProps),\n    WithAuthRedirect,\n)(Dialogs);"],"names":["mapStateToPropsRedirect","state","isAuth","auth","WithAuthRedirect","Component","connect","props","_jsx","_objectSpread","Navigate","to","className","concat","s","userId","children","message","path","id","_jsxs","NavLink","src","avatar","alt","name","maxLength","AddMessageForm","register","handleSubmit","formState","errors","useForm","onSubmit","data","addMessage","Textarea","required","placeholder","dialogsElements","dialogsPage","dialogs","map","d","DialogItem","messagesElements","messages","m","Message","Dialogs","compose","dispatch","addMessageCreator","updateNewMessageBody","body","updateNewMessageTextCreator"],"sourceRoot":""}